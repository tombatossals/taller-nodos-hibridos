<!DOCTYPE html>

<!--
  Google HTML5 slide template

  Authors: Luke Mahé (code)
           Marcin Wichary (code and design)
           
           Dominic Mazzoni (browser compatibility)
           Charles Chen (ChromeVox support)

  URL: http://code.google.com/p/html5slides/
-->

<html>
  <head>
    <title>Taller nodos híbridos: Configuración de una omnitik con Nanostations en guifi.net</title>
    <meta name="description" content="Presentación de un pequeño taller de configuración de un router RB450 de Mikrotik para la asociación ASSIX de Castellón" />
    <meta charset='utf-8'>
    <script src='js/slides.js'></script>
  </head>
  
  <body>

    <section class='slides layout-regular template-default'>
      
      <article class='biglogo'>
        <h1 class="title">Taller nodos híbridos</h1>
        <h2 class="title">Omnitik</span></h2>
        <h3 class="subtitle">Supernodos híbridos (mikrotik/ubiquiti) en guifi.net</h3>
        <div class="subinfo">
          Apreta la tecla <span class="key">&rarr;</span> para avanzar.
        </div>
        <div class='source'>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/"><img
                style="display: inline; margin-right: 1em;" src="images/cc.png" /></a>
            <a href="https://plus.google.com/100184619238119414805/posts">+David Rubert</a>
        </div>
        <a href="http://www.uji.es"><img style="box-shadow: .1em .1em 0.3em 
            #222; position: absolute; bottom: 1em; right: 1em; opacity: .7;" src="images/uji-logo.png" /></a>
      </article>

      <article class='fill'>
        <h3></h3>
        <img alt="Supernodo Casalduch" src="images/casalduch.jpg" />
        <img alt="Supernodo Paseo Universidad" src="images/paseouniversidad.jpg" />
        <img alt="Supernodo San Jose" src="images/sanjose.jpg" />
        <div class='source white'>
          Cambia de foto con las teclas: <span class="key">&uarr;</span> y <span class="key">&darr;</span>, o la tecla <span class="key">&rarr;</span> para avanzar.
        </div>
      </article>

      <article>
        <h1 class="title">¿Qué es guifi.net?</h1>
        <hr class="title" />
        <img class="logo" src="images/wikipedia-logo.jpg" />
        <p class="justify">Guifi.net es una red de telecomunicaciones
        <strong>libre</strong>, <strong>abierta</strong> y
        <strong>neutral</strong>, mayoritariamente inalámbrica, con más de 30.000 nodos, de los cuales
        más de 20.000 están operativos.</p>
        <p class="justify">Licencia procomún de la Red Abierta, Libre y Neutral:</p>
        <div style="background: #EFEFEF; font-size: .9em; padding: .5em 1em; margin: 1em 0; border: 4px
            solid #888;">
        <ul style="margin-top: 0em;">
        <li><strong>Libertad de uso de la red.</strong></li>
        <li><strong>La red libre no tiene dueño</strong>, y está conformada por múltiples tecnologías y componentes.</li>
        <li><strong>Puedes unirte y extender la red siempre en las mismas condiciones</strong> aceptando la libre circulación de comunicaciones por ella.</li>
        </div>
        </ul>
      </article>

      <article class='fill'>
        <h3></h3>
        <img alt="Gráfica de crecimiento de la red 2011" src="images/graph2011.png" />
        <img alt="Gráfica de crecimiento de la red 2012" src="images/graph2012.png" />
        <img alt="Gráfica de crecimiento de la red 2013" src="images/2013.png" />
        <div class='source white'>
            <p>Cambia de foto con las teclas: <span class="key">&uarr;</span> y <span class="key">&darr;</span>
        </div>

      </article>

      <article class="map">
        <h1 class="title">Evolución en Castellón de la red guifi.net</h1></header>
        <br style="clear: both;" />
        <div id="map" style="width: 780px; height: 500px;"></div>
        <p style="margin:0; font-size: .8em;" class="small">Actualmente en Castellón hay <strike>271</strike> (2010), <strike>1012</strike> (2011), <strike>2.398</strike> (2012), <strong>3.724</strong> (2013) nodos activos y <strike>175</strike> (2010), <strike>363</strike> (2011), <strike>954</strike> (2012), <strong>1.419</strong> proyectados.</p>
      </article>

      <article class='biglogo'>
        <h2 class="title" style="font-size: 3em;">Hardware</span></h2>
        <h3 class="subtitle">Omnitik/Mikrotik y Nanostation/Ubiquiti</h3>
        <div class="subinfo">
          Apreta la tecla <span class="key">&rarr;</span> para avanzar.
        </div>
      </article>

      <article>
        <h1 class="title">Hardware Mikrotik</h1>
        <hr class="title" />
        <img class="logo shadow" src="images/hardware.jpg" />
        <p><a href="http://mikrotik.com">http://mikrotik.com</a></p>
        <ul>
            <li><strong>Amplia gama.</strong> De lo más básico (39 euros) a routers de 1MPPS (400 euros).</li>
            <li><strong>Gestión unificada.</strong> Todo su hardware se administra con el mismo software, <strong>RouterOS</strong>.</li>
            <li><strong>Normalmente multivoltaje.</strong> De 12V a 24V.</li>
            <li><strong>Diferentes tipos de licencias según las necesidades.</strong> Normalmente con el hardware adquirido ya viene la licencia adecuada.</li>
            <li><strong>Muy interesante:</strong> El nuevo hardware con POE-OUT en los puertos ethernet.</li>
        </ul>
      </article>

      <article class='fill'>
        <h3></h3>
        <img alt="Omnitik" src="images/omnitik.jpg" />
        <img alt="Interior Omnitik" src="images/omnitik2.png" />
        <img alt="RB750" src="images/rb750.jpg" />
        <img alt="RB600: Biblioteca UJI" src="images/rb600.jpg" />
        <img alt="RB450" src="images/rb450.jpg" />
        <div class='source white'>
            <p>Cambia de foto con las teclas: <span class="key">&uarr;</span> y <span class="key">&darr;</span></p>
        </div>
      </article>

      <article>
        <h1 class="title">Hardware Ubiquiti</h1>
        <hr class="title" />
        <img class="logo shadow" src="images/hardware.jpg" />
        <p><a href="http://ubnt.com">http://ubnt.com</a></p>
        <ul>
            <li><strong>Amplia gama.</strong> Nos centraremos en su línea <strong>airMAX</strong>.</li>
            <li><strong>Gestión sencilla.</strong> Interfaz web <strong>airOS</strong>.</li>
            <li><strong>Versátiles, fáciles de instalar, resistentes.</strong></li>
            <li><strong>Multivoltaje.</strong></li>
        </ul>
      </article>

      <article class='fill'>
        <h3></h3>
        <img alt="La nanostation M5" src="images/nano01.gif" />
        <img alt="Antena y alimentación POE" src="images/nano02.jpg" />
        <img alt="Conector RJ-45 de datos y POE" src="images/nano03.jpg" />
        <img alt="Antena instalada" src="images/nano04.jpg" />

        <div class='source white'>
            <p>Cambia de foto con las teclas: <span class="key">&uarr;</span> y <span class="key">&darr;</span>
        </div>
      </article>

      <article class='biglogo'>
        <h2 class="title" style="font-size: 3em;">Supernodo</span></h2>
        <h3 class="subtitle">Cómo montar un supernodo híbrido</h3>
        <div class="subinfo">
          Apreta la tecla <span class="key">&rarr;</span> para avanzar.
        </div>
      </article>

      <article>
        <h1 class="title">Coordinar el montaje de un supernodo</h1>
        <hr class="title" />
        <img class="logo shadow" src="images/alliance.png" />
        <p>Lo primero sería hablar con administradores de otros supernodos cercanos para crear enlaces lo más robustos posibles.</p>
        <ul>
            <li><strong>usuaris@castello.guifi.net.</strong> La lista de correo es el punto de información principal para conseguir unirse a la red.</li>
            <li><strong>Enlaces lo más cortos posibles.</strong> Enlaces demasiado largos derivan en problemas (a medio plazo) con la saturación de frecuencias.</li>
        </ul>
      </article>

      <article>
        <h1 class="title">Montaje básico con Omnitik</h1>
        <hr class="title" />
        <img class="logo shadow" src="images/atom.png" />
        <p>Hoy comentaremos el montaje más básico de supernodo: Omnitik con POE-OUT y antena Nanostation. Intervienen:</p>
        <ul>
            <li><strong>Omnitik UPA-5HnD.</strong> Hardware mikrotik que lleva una antena omnidireccional integrada, POE-IN en el puerto principal y POE-OUT en el resto.</li>
            <li><strong>Nanostation M5.</strong> La utilizaremos para establecer el enlace troncal contra el otro supernodo.</li>
            <li><strong>Cable ethernet cat5E.</strong> Dependiendo de la localización del transformador necesitaremos más (o menos) tirada de cable.</li>
            <li><strong>Transformador correctamente dimensionado</strong>. El que viene con la Omnitik UPA es perfectamente válido.</li>
        </ul>
      </article>

      <article class='fill'>
        <h3></h3>
        <img alt="Mínima expresión del montaje" src="images/full01.png" />
      </article>

      <article class='biglogo'>
        <h2 class="title" style="font-size: 2.4em;">Configuración</span></h2>
        <h3 class="subtitle">Unos conceptos previos a tener en cuenta</h3>
        <div class="subinfo">
          Apreta la tecla <span class="key">&rarr;</span> para avanzar.
        </div>
      </article>

      <article>
        <h1 class="title">Configuración de red de los equipos</h1>
        <hr class="title" />
        <img class="logo shadow" src="images/ip.png" />
        <p>Uno de los conceptos más complicados de entender cuando configuramos un supernodo es que tenemos que definir 3 rangos de IP's diferentes.</p>
        <ul>
            <li><strong>IP's de comunicación entre las antenas.</strong></li>
            <li><strong>IP's de comunicación punto a punto entre los supernodos.</strong></li>
            <li><strong>IP's públicas de supernodo, normalmente el rango de cobertura de clientes de 30 IP's.</strong></li>
        </ul>
      </article>

      <article class='fill'>
        <h3></h3>
        <img alt="Comunicación entre las antenas" src="images/comunicacion01.png" />
        <img alt="Comunicación entre supernodos" src="images/comunicacion02.png" />
        <img alt="IP's públicas de guifi.net" src="images/comunicacion03.png" />

        <div class='source white'>
            <p>Cambia de foto con las teclas: <span class="key">&uarr;</span> y <span class="key">&darr;</span>
        </div>
      </article>

      <article>
        <h1 class="title">OSPF</h1>
        <hr class="title" />
        <img class="logo shadow" src="images/web.png" />
        <p>Para que todos los supernodos conozcan las rutas públicas más allá de sus nodos adyacentes, utilizamos el enrutamiento dinámico que nos proporciona <strong>OSPF</strong>.</li>
        <ul>
            <li><strong>Calcula la mejor ruta en función del mínimo número de saltos.</strong></li>
            <li><strong>Una vez configurado, funciona de manera automática.</strong></li>
            <li><strong>Podemos cambiar pesos para priorizar una ruta, pero no es recomendable.</strong></li>
        </ul>
      </article>

      <article class='biglogo'>
        <h2 class="title" style="font-size: 2.4em;">Registro</span></h2>
        <h3 class="subtitle">Obteniendo IP's guifi.net</h3>
        <div class="subinfo">
          Apreta la tecla <span class="key">&rarr;</span> para avanzar.
        </div>
      </article>

      <article>
        <h1 class="title">Registro en la web y obtención de IP's</h1>
        <hr class="title" />
        <p>Jorge nos cuenta esta parte. :)</p>
      </article>

      <article class='biglogo'>
        <h2 class="title" style="font-size: 2.4em;">Configuración</span></h2>
        <h3 class="subtitle">Pasemos a configurar los cacharros</h3>
        <div class="subinfo">
          Apreta la tecla <span class="key">&rarr;</span> para avanzar.
        </div>
      </article>

      <article>
        <h1 class="title">Reseteo a valores por defecto</h1>
        <hr class="title" />
        <img class="logo shadow" src="images/reset.jpg" />
        <p>El router nos puede venir pre-configurado como es el caso. Vamos a resetearlo a valores por defecto primero que nada.</p>
        <ul>
            <li><strong>Veamos la página web de información del router:</strong> <a href="http://routerboard.com/RBOMNITIKUPA-5HnD">http://routerboard.com/RBOMNITIKUPA-5HnD</a>.</li>
            <li><strong>En la "Quick Guide" nos dice que para resetear hay que mantener presionado el botón durante un ciclo de boot</strong>. Con un destornillador hacemos contacto y realizamos una secuencia de reinicio.</li>
        </ul>
      </article>

      <article>
        <h1 class="title">Conectar por primera vez</h1>
        <hr class="title" />
        <img class="logo shadow" src="images/rj45.jpg" />
        <p>Los cacharros Mikrotik suelen alimentarse por POE en el primer puerto, y en ese mismo puerto tienen una IP en la configuración por defecto, la <strong>192.168.88.1</strong>. Por tanto:</p>
        <ul>
            <li><strong>Accedemos al router conectando un cable RJ-45 del ordenador al primer puerto del Mikrotik.</strong></li>
            <li><strong>Nos configuramos una IP del rango 192.168.88.0/24 para poder llegar hasta él.</strong></li>
            <li><strong>O usamos la opción mágica: Accedemos con una búsqueda por MAC gracias a Winbox.</strong></li>
            <li><strong>El usuario por defecto es "admin", sin contraseña</strong></li>
        </ul>
      </article>

      <article class='fill'>
        <h3></h3>
        <img alt="Configuración para acceso IP" src="images/881.png" />
        <img alt="Acceso por MAC desde Winbox" src="images/winboxmac.png" />
        <div class='source white'>
            <p>Cambia de foto con las teclas: <span class="key">&uarr;</span> y <span class="key">&darr;</span>
        </div>
      </article>

      <article>
        <h1 class="title">Winbox</h1>
        <hr class="title" />
        <img class="logo shadow" src="images/winbox01.jpg" />
        <p>Winbox es la herramienta Win32 que nos proporciona Mikrotik para gestionar sus cacharros.</p>
        <ul>
            <li><strong>Para Windows, pero funciona en Linux con Wine.</strong></li>
            <li><strong>Cómoda si estás habituado a herramientas de escritorio.</strong></li>
            <li><strong>La que más funcionalidad da de las tres posibles.</strong></li>
        </ul>
      </article>

      <article>
        <h1 class="title">WebFig</h1>
        <hr class="title" />
        <img class="logo shadow" src="images/webfig01.png" />
        <p>WebFig la incluyeron a partir de la versión 5.0 de RouterOS, es un entorno web similar a <strong>Winbox</strong></p>
        <ul>
            <li><strong>No necesitamos más que un navegador, da igual la plataforma.</strong></li>
            <li><strong>No tan cómoda y funcional como Winbox.</strong></li>
            <li><strong>Acceso web:</strong> http://192.168.88.1</strong></li>
        </ul>
      </article>

      <article>
        <h1 class="title">Línea de comandos: SSH o Telnet</h1>
        <hr class="title" />
        <img class="logo shadow" src="images/mikrotik1.jpg" />
        <p>También podemos acceder a cualquier sistema mikrotik vía SSH o telnet. Es el que yo suelo utilizar más por lo cómodo y rápido.</p>
        <ul>
            <li><strong>Secciones unificadas con las dos herramientas anteriores</strong></li>
            <li><strong>Acceso en modo consola: telnet o SSH.</strong></li>
        </ul>
      </article>

      <article>
        <h1 class="title">Opcional: Actualizar el firmware</h1>
        <hr class="title" />
        <img class="logo shadow" src="images/firmware.jpg" />
        <p>Es recomendable bajar la última versión de firmware y actualizar. Es un proceso sencillo e inocuo con el que no podemos romper nada si no hacemos el cafre.</p>
        <ul>
            <li><strong>Descargamos el último firmware de la web de Mikrotik:</strong> <a href="http://http://www.mikrotik.com/download">http://www.mikrotik.com/download</a></li>
            <li><strong>Descargamos el paquete NPK, a no ser que necesitemos funciones adicioneles (bajaríamos el .zip)</strong></li>
            <li><strong>Subimos el archivo por FTP y lo dejamos caer al directorio raiz.</strong></li>
            <li><strong>Reiniciamos (/system reboot)</strong> y ya está.</li>
        </ul>
      </article>

      <article>
        <h1 class="title">Segmentar el switch</h1>
        <hr class="title" />
        <img class="logo shadow" src="images/rb450mini.jpg" />
        <p>Este cacharro Mikrotik lleva un switch de 4 puertos, que nos va a interesar desligar, de manera que cada puerto será un interfaz en un segmento de red diferente. Para conseguirlo, accedemos a la siguiente sección:</p>
        <br />
        <img src="images/switch01.png" />
      </article>

      <article>
        <h1 class="title">Nombrar y comentar las interfaces</h1>
        <hr class="title" />
        <img class="logo shadow" src="images/rb450mini.jpg" />
        <p>Veamos ahora cómo tenemos las interfaces y les ponemos comentarios para saber qué tenemos que conectar en cada puerto.</p>
        <br />
        <img src="images/interfaces01.png" />

      </article>

      <article>
        <h1 class="title">Alimentar puertos</h1>
        <hr class="title" />
        <img class="logo shadow" src="images/rb450mini.jpg" />
        <p>Podemos inyectar el POE-out sobre el puerto que queramos desde línea de comandos si disponemos de una Omnitik UPA.</p>
        <br />
        <img src="images/poe.png" />

      </article>

      <article>
        <h1 class="title">Configurar las direcciones IP</h1>
        <hr class="title" />
        <img class="logo shadow" src="images/ip.jpg" />
        <p>Configuremos ahora las direcciones IP que queremos poner en cada segmento de red según nos las ha asignado la web de guifi.net.</p>
        <br />
        <img src="images/ip01.png" />
      </article>

      <article>
        <h1 class="title">Configurar el OSPF</h1>
        <hr class="title" />
        <img class="logo shadow" src="images/ospf-logo.png" />
        <p>Una vez comprobada la conectividad punto a punto con las antenas y los supernodos adyacentes, configuremos el OSPF.</p>
        <br />
        <img src="images/ospf01.png" />
      </article>

      <article>
        <h1 class="title">Más configuraciones interesantes</h1>
        <hr class="title" />
        <img class="logo shadow" src="images/plus.png" />
	<ul>
	    <li>Habilitar SNMP para graficar correctamente.</li>
	    <li>Script de backup de la configuración del router.</li>
	    <li>Podéis comprobar configuraciones entrando como guest en cualquier supernodo, por ejemplo Castalia: 10.228.144.161.</li>
	</ul>
      </article>

      <article>
        <h1 class="title">Nanostation</h1>
        <hr class="title" />
        <img class="logo shadow" src="images/nano.jpg" />
	<p>En la nanostation únicamente deberemos configurar 2 apartados principales, el enlace (modo AP o modo Station) y la configuración de red (antena en modo bridge y la IP de gestión que le comunique con la omnitik).</p>
      </article>

      <article class='fill'>
        <h3></h3>
        <img alt="Antena cliente castalia-laplana" src="images/laplana01.png" />
        <img alt="Configuración del enlace Wireless" src="images/laplana02.png" />
        <img alt="Configuración de red" src="images/laplana03.png" />
        <div class='source white'>
            <p>Cambia de foto con las teclas: <span class="key">&uarr;</span> y <span class="key">&darr;</span></p>
        </div>
      </article>

    </section>

    <script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="js/guifinet_wms.js"></script>
  </body>
</html>
